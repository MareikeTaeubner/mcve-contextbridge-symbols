const { contextBridge } = require("electron");

contextBridge.exposeInMainWorld("test_api", {
  iterate(iterable) {
    const values = [];
    for (const item of iterable) {
      values.push(item);
    }
    return values;
  },
  //altIterable is an object that provides the iterator on the property `myIterator`
  // instead of Symbol.iterator to show that Symbol.iterator is not the problem here
  // see test "should iterate over a non-native iterable" to see why Symbol.iterator is not the problem
  iterateAlt(altIterable) {
    const values = [];

    //manually iterate over the values because we don't have Symbol.iterate
    const iterator = altIterable.myIterator();
    while (true) {
      const { done, value } = iterator.next();
      if (done) {
        break;
      } else {
        values.push(value);
      }
    }

    return values;
  },
});
